<template name="single_qoll">
  <div class="row">
     <div class="col-md-12 col-xs-12 list-group-item qoll-seperator {{#if is_parent}} list-group-item-heading{{/if}} bg-qoll" id='{{q._id}}'>
      
      <div class="col-md-10 col-xs-12">
        <h4>{{q.qoll_idx_title}} {{{transform_txt q.qollTitle q.cat q.context q.fib q.tex q.texMode q.idx}}}</h4>
        <h5>{{{transform_txt q.qollText q.cat q.context q.fib q.tex q.texMode q.idx}}}</h5>

        <!-- {{#mathjax}} $$ Ax^3+ax^2+bx+c = 0 $$ {{/mathjax}} -->

        {{{get_units_html q.unit_name q.units}}}
        
        {{#if q.unit}}
          <div class="input-group">{{#if q.unit_name}}{{q.unit_name}}: {{else}}Unit: {{/if}}
            {{#each q.unit}} 
                <input name="unit" value="{{this}}" type="radio" {{is_unit_selected ../q.qoll_response.unit}}> {{this}}
            {{/each}}
          </div>
        {{/if}}

        {{#each imgs q.imageIds}}
          <img src="{{this.url store='thumbs_1'}}" class="qoll-thumbs" data-gallery id="{{this._id}}"/>
        {{/each}}
        <!--{{{get_hint_html q.hint q.context}}}-->
        {{#if q.hint}}
          <button type="button" class="btn btn-warning pull-right" data-toggle="tooltip"
            data-placement="left" title="Partial credit will be deducted..." id="show_hint">Hint
          </button>
          <div class="{{get_hint_visibility q.qoll_response.usedHint}} red_1" id="hint">
            <h5>{{{q.hint}}} {{#if q.qoll_response.usedHint}} <u>(Already used hint)</u>{{/if}}</h5>
          </div>
        {{/if}}

        {{#if q.show_result}}
          <span class="blue_1" style="font-size: large">
            Scored: 
            {{#if q.qoll_response.weight_earned}}
              {{q.qoll_response.weight_earned}} 
            {{else}}
              0
            {{/if}}
          </span>
        {{/if}}

        {{#if q.qoll_attributes}}
          <span class="blue_1" style="font-size: large">Max: {{q.qoll_attributes.weight}} Points</span>
          {{#if q.qoll_attributes.hint_penalty}}
            <span class="blue_1" style="font-size: large"> (Penalty: {{q.qoll_attributes.hint_penalty}}% for hint)</span>
          {{/if}}
        {{/if}}

        {{#if is_blank_type q.cat}}
          <!--span id="{{q._id}}" class="badge pull-left register-blank glossy green_bg_1"-->
          <span id="{{q._id}}" class="badge pull-left {{get_register_class q.context}} glossy {{get_register_bg_class q.context}}">
            Submit
          </span>
        {{/if}}
        <span class="saved-msg green"></span>
      </div>

      <div class="col-md-2 col-xs-12">

        {{#if if_createusr}}
        	<span class="pull-left badge lesstoggle">{{get_totals}}</span>
          {{#if if_stored}}
          <span class="pull-right send-qoll-btn glossy"><i class="glyphicon glyphicon-send blue ios-enabled"></i></span>
          {{/if}}
          {{#if if_send}}
            <span class="pull-right lock-qoll-btn glossy"><i class="glyphicon glyphicon-off orange lock-btn ios-enabled"></i></span>
          {{/if}}
          {{#if if_edit}}
            <!-- span class="pull-right glossy"><a href="qolleditor_adv_edit"><i class="glyphicon glyphicon-pencil blue ios-enabled"></i></a></span-->
          {{/if}} 
          {{#if if_lock}}
            <span class="pull-right resend-qoll-btn glossy"><i class="glyphicon glyphicon-refresh blue resend-btn ios-enabled"></i></span>
          {{/if}}          
          <span class="pull-right render-chart-btn glossy"><i class="glyphicon glyphicon-stats green ios-enabled"></i></span>
          {{#unless is_parent}} <span class="pull-right edit-qoll-btn glossy"><i class="glyphicon glyphicon-edit ios-enabled"></i></span>{{/unless}}
          <span class="pull-right archive-qoll-btn glossy"><i class="glyphicon glyphicon-trash red ios-enabled"></i></span>
        {{/if}}
        {{#unless if_createusr}}
        	<span class="badge pull-right sender-badge">{{sendingUser}}</span>
        {{/unless}}
      </div>
    </div>
  </div>
    <!-- End of Qoll Section here -->
    
    <!-- Starting of qoll-types for the Qoll -->
    <!-- Check if this reading comprehension type and then accordingly generate the options -->
    {{#if is_reading_comprehension_type q}}
      <div class="row list-group-item">
        <div class="col-md-12 col-xs-12">
            <span style="color: #5959AB;font-weight: 100; font-size: 1.3em; font-style: oblique;">Answer the following questions based on above</span>
            {{#each q.tt}}
              <div class="row">
                <div class="col-md-12 col-xs-12">
                  <br /><span style="color: #16162D;font-weight: 800; font-size: larger;">({{get_print_idx @index}}) {{this.question}}</span>
                  {{#let rc_ndex=@index}}
                    {{#each this.types}}
                      {{#with index = @index value = this}}
                        {{> single_qoll_options qollType=this qoll=../../.. rc_index=rc_ndex }}
                      {{/with}}
                    {{/each}}
                  {{/let}}
                </div>
              </div>
            {{/each}}
        </div>
      </div>
    {{else}}
      <div class="row">
        <div class="col-md-12 col-xs-12">
        {{#each q.qollTypes}}
          {{> single_qoll_options qollType=this qoll=.. }}
        {{/each}}

        </div>
      </div>
    {{/if}}

    {{#if q.explanation}}
      <br>
      <div class="row">
        <div class="col-md-12 col-xs-12">
          <span class="qoll-comment-display-9">Explanation: </span>
          <!-- <h5><pre>{{{q.explanation.txt}}}</pre></h5> -->
          <span class="explanation">{{{transform_txt q.explanation q.cat QollConstants.CONTEXT.READ q.fib q.tex q.texMode q.idx}}}</span>
        </div>
      </div>
    {{/if}}
    <!-- End of qoll types here -->
 

</template>